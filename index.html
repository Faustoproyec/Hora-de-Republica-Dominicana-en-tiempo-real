<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Hora Dominicana</title>
<style>
  body{
    margin:0;
    padding:0;
    font-family:"Segoe UI",sans-serif;
    height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    background-image:url("https://upload.wikimedia.org/wikipedia/commons/9/9f/Flag_of_the_Dominican_Republic.svg");
    background-size:cover;
    background-position:center;
    color:white;
    text-align:center;
  }
  .overlay{
    position:fixed; inset:0;
    background: rgba(0,0,0,0.45);
  }
  .card{
    position:relative;
    z-index:2;
    padding: 30px 40px;
    border-radius:14px;
    backdrop-filter: blur(6px);
    background: rgba(0,0,0,0.35);
    border: 3px solid rgba(255,255,255,0.15);
  }
  .title{ font-size:2.2rem; margin-bottom:10px; text-shadow:0 0 10px black; }
  .clock{ font-size:5.2rem; font-weight:700; letter-spacing:2px; text-shadow:0 0 12px black; }
  .ampm{ font-size:1.6rem; margin-top:8px; font-weight:700; text-shadow:0 0 8px black; }
  .sub{ margin-top:12px; opacity:0.9; }
  @media(max-width:600px){
    .clock{ font-size:3.2rem; }
    .title{ font-size:1.4rem; }
  }
</style>
</head>
<body>
  <div class="overlay"></div>

  <div class="card" role="main">
    <div class="title">ðŸ‡©ðŸ‡´ Hora en RepÃºblica Dominicana</div>
    <div id="clock" class="clock">--:--:--</div>
    <div id="ampm" class="ampm">AM</div>
    <div class="sub">Tiempo oficial de RD (America/Santo_Domingo)</div>
  </div>

<script>
(function(){
  // Crea un formateador que nos entregue las partes segÃºn la zona horaria RD
  const dtf = new Intl.DateTimeFormat('es-DO', {
    timeZone: 'America/Santo_Domingo',
    hour: '2-digit',
    minute: '2-digit',
    second: '2-digit',
    hour12: true
  });

  // Devuelve {hour, minute, second, dayPeriod} con ceros ya aplicados
  function getRDParts(){
    const parts = dtf.formatToParts(new Date());
    const map = {};
    for(const p of parts){
      if(p.type !== 'literal') map[p.type] = p.value;
    }
    // Algunos navegadores devuelven hour en formato 12h ya con 01..12; otros pueden devolver '0' raros.
    // Nos aseguramos de normalizar: hour como nÃºmero entre 1-12 y padStart a 2.
    let hour = map.hour ?? '00';
    // normalize possible "0" -> "12" for midnight if necessary
    if(hour === '0') hour = '12';
    hour = String(hour).padStart(2,'0');
    const minute = String(map.minute ?? '00').padStart(2,'0');
    const second = String(map.second ?? '00').padStart(2,'0');
    const dayPeriod = (map.dayPeriod || (parseInt(hour,10) >= 12 ? 'PM' : 'AM')).toUpperCase();
    return { hour, minute, second, dayPeriod };
  }

  function updateClock(){
    const { hour, minute, second, dayPeriod } = getRDParts();
    document.getElementById('clock').textContent = `${hour}:${minute}:${second}`;
    document.getElementById('ampm').textContent = dayPeriod;
  }

  // Actualiza cada segundo pero sincronizando con el segundo real para evitar drift
  function startTicker(){
    updateClock();
    // calcular ms hasta el siguiente segundo exacto
    const now = new Date();
    const msToNext = 1000 - now.getMilliseconds();
    setTimeout(function(){
      updateClock();
      setInterval(updateClock, 1000);
    }, msToNext);
  }

  startTicker();
})();
</script>
</body>
</html>
